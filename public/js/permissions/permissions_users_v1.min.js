function handleEdit(a){let e=new FormData;e.append("id_folio",a),$.ajax({data:e,url:urls+"requisiciones/editar_requisicion",type:"post",processData:!1,contentType:!1,async:!0,dataType:"json",success:function(e){console.log(e.tipo_de_personal),"error"!=e?($("#id_folio").val(a),$("#tipo_personal").val(e.tipo_de_personal),$("#puesto_solicitado").val(e.puesto_solicitado),$("#personas_requeridas").val(e.personas_requeridas),$("#horario_inicial").val(e.horario_inicial),$("#horario_final").val(e.horario_final),$("#salario_inicial").val(e.salario_inicial),$("#salario_final").val(e.salario_final),$("#editarModal").modal("show")):(Swal.fire({icon:"error",title:"Oops...",text:"Algo salió Mal! Contactar con el Administrador"}),console.log("Mal Revisa"))}})}function validaNumericos(a){return a.charCode>=48&&a.charCode<=57}$(document).ready(function(){tbl_requisitions=$("#tabla_usuario_permisos").dataTable({processing:!0,ajax:{method:"post",url:urls+"permisos/por_usuario",dataSrc:""},lengthChange:!0,ordering:!0,responsive:!0,autoWidth:!1,rowId:"staffId",dom:"lBfrtip",buttons:[{extend:"excelHtml5",title:"Requisiciones",exportOptions:{columns:[0,1,2,3,4]}}],language:{url:"//cdn.datatables.net/plug-ins/9dcbecd42ad/i18n/Spanish.json"},columns:[{data:"id_es",title:"Folio",className:"text-center"},{data:"fecha_creacion",title:"FECHA CREACIÓN",className:"text-center"},{data:"nombre_solicitante",title:"USUARIO"},{data:"departamento",title:"DEPARTAMENTO"},{data:null,render:function(a,e,t,s){return"0000-00-00"==a.fecha_salida?"---":` <div class="mr-auto">\n                      ${a.fecha_salida} </br>\n                      ${a.hora_salida}\n                    </div> `},title:"SALIDA",className:"text-center"},{data:null,render:function(a,e,t,s){return"0000-00-00"==a.fecha_entrada?"---":` <div class="mr-auto">\n                      ${a.fecha_entrada} </br>\n                      ${a.hora_entrada}\n                    </div> `},title:"ENTRADA",className:"text-center"},{data:null,render:function(a,e,t,s){return"0000-00-00"==a.inasistencia_del?"---":` <div class="mr-auto">\n                      ${a.inasistencia_del} </br>\n                      ${a.inasistencia_al}\n                    </div> `},title:"INASISTENCIA",className:"text-center"},{data:null,render:function(a,e,t,s){switch(a.estatus){case"Rechazada":return`<span class="badge badge-danger">${a.estatus}</span>`;case"Autorizada":return`<span class="badge badge-success">${a.estatus}</span>`;default:return`<span class="badge badge-warning">${a.estatus}</span>`}},title:"Estatus",className:"text-center"},{data:null,title:"VER",className:"text-center"}],destroy:"true",columnDefs:[{targets:8,render:function(a,e,t,s){return` <div class="mr-auto">\n                       <a href="${urls}permisos/ver-permisos/${$.md5(key+a.id_es)}" target="_blank" class="btn btn-info btn-sm">\n                             <i class="fas fa-eye"></i>\n                       </a>\n                     </div> `}},{targets:[0],visible:!1,searchable:!1}],order:[[0,"DESC"]],createdRow:(a,e)=>{$(a).attr("id","request_"+e.id_es)}}).DataTable(),$("#tabla_usuario_permisos thead").addClass("thead-dark text-center"),tbl_requisitions=$("#tabla_usuario_vacaciones").dataTable({processing:!0,ajax:{method:"post",url:urls+"permisos/mis-vacaciones",dataSrc:""},lengthChange:!0,ordering:!0,responsive:!0,autoWidth:!1,rowId:"staffId",dom:"lBfrtip",buttons:[{extend:"excelHtml5",title:"Días de Vacaciones",exportOptions:{columns:[0,1,2,3,4]}}],language:{url:"//cdn.datatables.net/plug-ins/9dcbecd42ad/i18n/Spanish.json"},columns:[{data:"id_vcns",title:"Folio",className:"text-center"},{data:null,render:function(a,e,t,s){var i=new Date(a.fecha_registro),r=i.getDate().toString().padStart(2,"0"),n=(i.getMonth()+1).toString().padStart(2,"0"),l=i.getFullYear(),o=i.getHours(),d=i.getMinutes();let c=r+"-"+n+"-"+l,u=o+":"+d;return"0000-00-00 00:00:00"===$.trim(a.fecha_registro)?"---":` <div class="mr-auto"> ${c} ${u} </div> `},title:"CREACIÓN",className:"text-center"},{data:"nombre_solicitante",title:"USUARIO"},{data:"num_dias_a_disfrutar",title:"DÍAS A DISFRUTAR",className:"text-center"},{data:null,render:function(a,e,t,s){return"0000-00-00"==a.dias_a_disfrutar_del?"":` <div class="mr-auto">\n                      ${a.dias_a_disfrutar_del}\n                    </div> `},title:"DEL",className:"text-center"},{data:null,render:function(a,e,t,s){return"0000-00-00"==a.dias_a_disfrutar_al?"---":` <div class="mr-auto">\n                      ${a.dias_a_disfrutar_al}\n                    </div> `},title:"AL",className:"text-center"},{data:null,render:function(a,e,t,s){return"0000-00-00"==a.regreso?"---":` <div class="mr-auto">\n                      ${a.regreso}\n                    </div> `},title:"REGRESA",className:"text-center"},{data:null,render:function(a,e,t,s){switch(a.estatus){case"Rechazada":return`<span class="badge badge-danger">${a.estatus}</span>`;case"Autorizada":return`<span class="badge badge-success">${a.estatus}</span>`;default:return`<span class="badge badge-warning">${a.estatus}</span>`}},title:"ESTATUS",className:"text-center"},{data:null,title:"VER",className:"text-center"}],destroy:"true",columnDefs:[{targets:8,render:function(a,e,t,s){return` <div class="mr-auto">\n                       <a href="${urls}permisos/vacaciones/${$.md5(key+a.id_vcns)}" target="_blank" class="btn btn-info btn-sm">\n                             <i class="fas fa-eye"></i>\n                       </a>\n                     </div> `}},{targets:[0],visible:!1,searchable:!1}],order:[[0,"DESC"]],createdRow:(a,e)=>{$(a).attr("id","vacaciones_"+e.id_vcns)}}).DataTable(),$("#tabla_usuario_vacaciones thead").addClass("thead-dark text-center")}),$("#actualizar_requisicion").submit(function(a){a.preventDefault(),$("#actualiza_requisicion").prop("disabled",!0);let e=new FormData;e.append("id_folio",$("#id_folio").val()),e.append("tipo_personal",$("#tipo_personal").val()),e.append("puesto_solicitado",$("#puesto_solicitado").val()),e.append("personas_requeridas",$("#personas_requeridas").val()),e.append("salario_inicial",$("#salario_inicial").val()),e.append("salario_final",$("#salario_final").val()),e.append("horario_inicial",$("#horario_inicial").val()),e.append("horario_final",$("#horario_final").val()),$.ajax({data:e,url:urls+"requisiciones/actualizar_requisicion",type:"post",processData:!1,contentType:!1,success:function(a){"error"!=a?(setTimeout(function(){tbl_requisitions.ajax.reload(null,!1)},100),$("#actualiza_requisicion").prop("disabled",!1),$("#editarModal").modal("toggle"),Swal.fire("!Los datos se han Actualizado!","","success")):Swal.fire({icon:"error",title:"Oops...",text:"Algo salió Mal! Contactar con el Administrador"})}})});