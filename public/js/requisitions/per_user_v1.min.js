function handleEdit(a){let e=new FormData;e.append("id_folio",a),$.ajax({data:e,url:urls+"requisiciones/editar_requisicion",type:"post",processData:!1,contentType:!1,async:!0,dataType:"json",success:function(e){console.log(e.tipo_de_personal),"error"!=e?($("#id_folio").val(a),$("#tipo_personal").val(e.tipo_de_personal),$("#puesto_solicitado").val(e.puesto_solicitado),$("#personas_requeridas").val(e.personas_requeridas),$("#horario_inicial").val(e.horario_inicial),$("#horario_final").val(e.horario_final),$("#salario_inicial").val(e.salario_inicial),$("#salario_final").val(e.salario_final),$("#editarModal").modal("show")):(Swal.fire({icon:"error",title:"Oops...",text:"Algo salió Mal! Contactar con el Administrador"}),console.log("Mal Revisa"))}})}function MASK(a,e,t,i){if("undefined"==i&&(i=!1),i||NUM(e)){dec=0,point=0,n=t.indexOf(".")+1,n&&(dec=t.length-n),dec?(e=NUM(e,dec)+"",n=e.indexOf(".")+1,n?point=e.length-n:e+="."):e=NUM(e,0)+"";for(var n=point;n<dec;n++)e+="0";for(n=e.length,y=t.length,XMASK="";n||y;){if(n){for(;y&&-1=="#0.".indexOf(t.charAt(y-1));)"-"!=e.charAt(n-1)&&(XMASK=t.charAt(y-1)+XMASK),y--;XMASK=e.charAt(n-1)+XMASK,n--}else y&&"$0".indexOf(t.charAt(y-1))+1&&(XMASK=t.charAt(y-1)+XMASK);y&&y--}}else XMASK="";return a&&(a.value=XMASK,NUM(e)<0?a.style.color="#FF0000":a.style.color="#000000"),XMASK}function NUM(s,dec){for(var s=s+"",num="",x=0;x<s.length;x++)c=s.charAt(x),(".-+/*".indexOf(c)+1||" "!=c&&!isNaN(c))&&(num+=c);return isNaN(num)&&(num=eval(num)),num=""==num?0:parseFloat(num),null!=dec?(r=.5,num<0&&(r=-r),e=Math.pow(10,dec>0?dec:0),parseInt(num*e+r)/e):num}function validaNumericos(a){return a.charCode>=48&&a.charCode<=57}$(document).ready(function(){tbl_requisitions=$("#tabla_usuario_requisicion").dataTable({processing:!0,ajax:{method:"post",url:urls+"requisiciones/por_usuario",dataSrc:""},lengthChange:!0,ordering:!0,responsive:!0,autoWidth:!1,rowId:"staffId",dom:"lBfrtip",buttons:[{extend:"excelHtml5",title:"Requisiciones",exportOptions:{columns:[0,1,2,3,4]}}],language:{url:"//cdn.datatables.net/plug-ins/9dcbecd42ad/i18n/Spanish.json"},columns:[{data:"id_folio",title:"Folio",className:"text-center"},{data:null,render:function(a,e,t,i){var n=new Date(a.fecha_creacion),r=n.getDate().toString().padStart(2,"0"),o=(n.getMonth()+1).toString().padStart(2,"0"),s=n.getFullYear(),l=n.getHours(),c=n.getMinutes();let d=r+"-"+o+"-"+s,u=l+":"+c;return"0000-00-00"===$.trim(a.fecha_creacion)?"---":` <div class="mr-auto">\n                      ${d} \n                      ${u}\n                    </div> `},title:"FECHA CREACIÓN",className:"text-center"},{data:"puesto_solicitado",title:"PUESTO",className:"text-center"},{data:null,render:function(a,e,t,i){return usuario=a.name+" "+a.surname,usuario},title:"USUARIO",className:"text-center"},{data:"departament",title:"DEPARTAMENTO"},{data:null,render:function(a,e,t,i){switch(a.estatus){case"Rechazada":return`<span class="badge badge-danger">${a.estatus}</span>`;case"Autorizada":return`<span class="badge badge-success">${a.estatus}</span>`;default:return`<span class="badge badge-warning">${a.estatus}</span>`}},title:"ESTATUS",className:"text-center"},{data:null,title:"Acciones",className:"text-center"}],destroy:"true",columnDefs:[{targets:6,render:function(a,e,t,i){return` <div class="mr-auto">\n                      <a href="${urls}requisiciones/ver-requisicion/${$.md5(key+a.id_folio)}" target="_blank" class="btn btn-info btn-sm">\n                            <i class="fas fa-eye"></i>\n                      </a>\n                    </div> `}}],order:[[0,"DESC"]],createdRow:(a,e)=>{$(a).attr("id","request_"+e.id_folio)}}).DataTable(),$("#tabla_usuario_requisicion thead").addClass("thead-dark text-center")}),$("#actualizar_requisicion").submit(function(a){a.preventDefault(),$("#actualiza_requisicion").prop("disabled",!0);let e=new FormData;e.append("id_folio",$("#id_folio").val()),e.append("tipo_personal",$("#tipo_personal").val()),e.append("puesto_solicitado",$("#puesto_solicitado").val()),e.append("personas_requeridas",$("#personas_requeridas").val()),e.append("salario_inicial",$("#salario_inicial").val()),e.append("salario_final",$("#salario_final").val()),e.append("horario_inicial",$("#horario_inicial").val()),e.append("horario_final",$("#horario_final").val()),$.ajax({data:e,url:`${urls}requisiciones/actualizar_requisicion`,type:"post",processData:!1,contentType:!1,success:function(a){"error"!=a?(setTimeout(function(){tbl_requisitions.ajax.reload(null,!1)},100),$("#actualiza_requisicion").prop("disabled",!1),$("#editarModal").modal("toggle"),Swal.fire("!Los datos se han Actualizado!","","success")):Swal.fire({icon:"error",title:"Oops...",text:"Algo salió Mal! Contactar con el Administrador"})}})});