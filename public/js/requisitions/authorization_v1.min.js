function handleChange(e){let a=new FormData;a.append("id_folio",e),$.ajax({data:a,url:urls+"requisiciones/editar_item",type:"post",processData:!1,contentType:!1,async:!0,dataType:"json",success:function(a){console.log(a.name),"error"!=a?(a.forEach(function(e,a){$("#usuario").val(e.name+" "+e.surname),1==e.personas_requeridas?$("#personas_requeridas").val(e.personas_requeridas+" Persona"):$("#personas_requeridas").val(e.personas_requeridas+" Personas"),$("#puesto_solicitado").val(e.puesto_solicitado),$("#motivo").val(e.motivo_requisicion)}),$("#id_folio").val(e),$("#autorizarModal").modal("show")):(Swal.fire({icon:"error",title:"Oops...",text:"Algo salió Mal! Contactar con el Administrador"}),console.log("Mal Revisa"))}})}$(document).ready(function(){tbl_requisitions=$("#tabla_autorizar_requisiciones").dataTable({processing:!0,ajax:{method:"post",url:urls+"requisiciones/autorizar",dataSrc:""},lengthChange:!0,ordering:!0,responsive:!0,autoWidth:!1,rowId:"staffId",dom:"lBfrtip",buttons:[{extend:"excelHtml5",title:"Requisiciones",exportOptions:{columns:[0,1,2,3]}}],language:{url:"//cdn.datatables.net/plug-ins/9dcbecd42ad/i18n/Spanish.json"},columns:[{data:"id_folio",title:"FOLIO",className:"text-center"},{data:null,render:function(e,a,t,s){var n=new Date(e.fecha_creacion),i=n.getDate().toString().padStart(2,"0"),r=(n.getMonth()+1).toString().padStart(2,"0"),o=n.getFullYear(),l=n.getHours(),c=n.getMinutes();let u=i+"-"+r+"-"+o,d=l+":"+c;return"0000-00-00"===$.trim(e.fecha_creacion)?"---":` <div class="mr-auto">\n                      ${u} \n                      ${d}\n                    </div> `},title:"FECHA CREACIÓN",className:"text-center"},{data:null,render:function(e,a,t,s){return e.name.toUpperCase()+" "+e.surname.toUpperCase()},title:"USUARIO",className:"text-center"},{data:"departament",title:"DEPARTAMENTO",className:"text-center"},{data:null,render:function(e,a,t,s){switch(e.estatus){case"Rechazada":return`<span class="badge badge-danger">${e.estatus}</span>`;case"Autorizada":return`<span class="badge badge-success">${e.estatus}</span>`;default:return`<span class="badge badge-warning">${e.estatus}</span>`}},title:"ESTATUS",className:"text-center"},{data:null,title:"ACCIONES",className:"text-center"}],destroy:"true",columnDefs:[{targets:5,render:function(e,a,t,s){return"Pendiente"!=e.estatus?`<div class=" mr-auto">\n              <a href="${urls}requisiciones/ver-requisicion/${$.md5(key+e.id_folio)}" title="Ver Requisición" target="_blank" class="btn btn-info btn-sm">\n                      <i class="fas fa-eye"></i>\n                </a>\n                <button type="button" class="btn btn-secondary btn-sm" title="Autorizar Requisiciones">\n                      <i class="fas fa-user-check"></i>\n                </button>\n                \n              </div> `:`<div class=" mr-auto">\n              <a href="${urls}requisiciones/ver-requisicion/${$.md5(key+e.id_folio)}" title="Ver Requisición" target="_blank" class="btn btn-info btn-sm">\n                   <i class="fas fa-eye"></i>\n             </a>\n             <button type="button" class="btn btn-primary btn-sm" title="Autorizar Requisiciones"  onClick=handleChange(${e.id_folio})>\n                   <i class="fas fa-user-check"></i>\n             </button>\n           \n           </div> `}}],order:[[0,"DESC"]],createdRow:(e,a)=>{$(e).attr("id","request_"+a.id_folio)}}).DataTable(),$("#tabla_autorizar_requisiciones thead").addClass("thead-dark text-center")}),$("#autorizar_requisicion").submit(function(e){e.preventDefault();let a=new FormData,t=$("#estatus").val();a.append("id_folio",$("#id_folio").val()),a.append("estatus",t),$.ajax({data:a,url:urls+"requisiciones/autorizar-item",type:"post",processData:!1,contentType:!1,success:function(e){console.log(e),$("#autorizarModal").modal("toggle"),"error"!=e?(Swal.fire("!La Requisición a sido Actualizada !","","success"),tbl_requisitions.ajax.reload(null,!1)):Swal.fire({icon:"error",title:"Oops...",text:"Algo salió Mal! Contactar con el Administrador"})},error:function(e,a,t){Swal.fire({icon:"error",title:"Oops...",text:"Algo salió Mal! Contactar con el Administrador"}),console.log("Mal Revisa entro en el error: "+t)}})});